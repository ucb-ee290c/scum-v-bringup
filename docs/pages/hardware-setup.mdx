# Hardware Setup

Complete guide for setting up the SCuM-V hardware development environment.

## Equipment Required

### 1. SCuM-V Universal PCB

Choose from available revisions:

- **[Revision 1 Schematic/Layout](https://uc-berkeley-9.365.altium.com/designs/3D0D350B-0F0E-4E78-9462-98D18BF7F627)**
- **[Revision 3 Schematic/Layout](https://uc-berkeley-9.365.altium.com/designs/57925AD0-466D-477E-A70E-7C0E4B06D00B)**

### 2. FPGA Development Board

- **Arty A7-100T** (Recommended) - [Purchase Link](https://digilent.com/shop/arty-a7-100t-artix-7-fpga-development-board/)
- **Arty A7-35T** (Legacy - Discontinued by Digilent)

### 3. Level Shifters (2x Required)

**Purpose**: Convert 3.3V FPGA signals to 1.8V SCuM-V levels
- 1x for Analog Scan Chain (ASC)
- 1x for SerialTL interface

**Options**:
- [Digilent PMOD Level Shifter](https://digilent.com/shop/pmod-lvlshft-logic-level-shifter/) (Recommended)
- Custom breadboard voltage divider circuit

## Connection Guide

import { Callout } from 'nextra/components'

<Callout type="warning">
For Revision 1 Universal PCB: The on-board level shifters are **non-functional**. All connections must be made at the white headers.
</Callout>

### Power Jumper Connections

Connect the following jumpers on the PCB:

| Source | Destination |
|--------|-------------|
| Reg_1V6 | VBATT |
| Reg_1V8 | VDD_IO |
| LDO_VDD_AON | VDD_AON |
| BG_V_REF | BG_V_REF_EXT |
| I_REF | I_REF_EXT |
| LDO_VDD_A_RF | VDD_A_RF |

### Power Supply Requirements

| Supply | Voltage | Current Limit | Connection |
|--------|---------|---------------|------------|
| External Supply 1 | 3.5V | ~120 mA | PCB J1 |
| External Supply 2 | 0.85V | 50 mA | SCuM's VDD_D |
| Ground | 0V | - | J5 (Both supplies) |

<Callout type="info">
**Why 0.85V External Supply?**

SCuM-V22's on-chip LDO for the digital domain cannot source sufficient current for the entire digital block, requiring an external 0.85V supply.
</Callout>

### FPGA ↔ PCB Signal Connections

Both signal groups require **3.3V to 1.8V level shifting**:

#### Analog Scan Chain (ASC)
- `SCAN_EN` - Scan chain enable
- `SCAN_IN` - Serial data input  
- `SCAN_CLK` - Scan clock
- `SCAN_RESET` - Scan chain reset
- `SCAN_SEL` - Tied to +1.8V
- `RESET` - Tied as appropriate

#### SerialTL Interface
- `TL_CLK` - Clock from SCuM-V
- `TL_IN_VALID` - Input valid signal
- `TL_IN_READY` - Input ready signal
- `TL_IN_DATA` - Input data
- `TL_OUT_VALID` - Output valid signal
- `TL_OUT_READY` - Output ready signal
- `TL_OUT_DATA` - Output data

<Callout type="info">
See `hw/scumv-controller/src/a7top.xdc` for exact pin constraints and board mapping details.
</Callout>

### Clock Configuration

| Parameter | Value |
|-----------|-------|
| **Amplitude** | 0.85Vpp |
| **Waveform** | Square Wave, 50% duty cycle |
| **DC Offset** | 0.425V |
| **Frequency** | 200 kHz |

**Physical Connections**:
- Clock → J20, bypass 0
- Debug → J19

## Verification Steps

### 1. Power Supply Check
- Verify all voltage levels with multimeter
- Check current consumption is within limits
- Ensure proper grounding

### 2. Signal Integrity
- Verify level shifter operation (3.3V → 1.8V)
- Check clock signal quality with oscilloscope
- Confirm all connections match pin constraints

### 3. FPGA Programming Test
- Program FPGA with bitstream
- Verify LED2 turns on (indicates SCAN_CLK activity)
- Test basic communication

## Troubleshooting

### Common Issues

**Power Supply Problems**:
- Check voltage regulator settings
- Verify current limits are adequate  
- Ensure proper bypass capacitor placement

**Signal Issues**:
- Confirm level shifter direction and operation
- Check for proper impedance matching
- Verify clock signal integrity

**Connection Problems**:
- Double-check pin assignments vs. XDC file
- Ensure proper connector orientation
- Test continuity with multimeter

### Getting Help

For additional support:
- [GitHub Issues](https://github.com/ucb-ee290c/scum-v-bringup/issues)
- Check existing documentation in `hw/scumv-controller/DESIGN_SPECIFICATION.md`
- Review connection diagrams and schematics

---

**Next Steps**: [FPGA Programming Guide →](/fpga-setup)