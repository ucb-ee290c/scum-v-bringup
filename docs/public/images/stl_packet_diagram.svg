<svg width="1000" height="450" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1000" height="450" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="500" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">STL TileLink Packet Structure (128 bits total = 16 bytes)</text>
  
  <!-- Bit scale at top -->
  <text x="50" y="60" font-family="Arial, sans-serif" font-size="10" fill="#666">Byte:</text>
  <text x="950" y="60" font-family="Arial, sans-serif" font-size="10" text-anchor="end" fill="#666">15</text>
  <text x="90" y="60" font-family="Arial, sans-serif" font-size="10" fill="#666">0</text>
  
  <!-- Main frame box -->
  <rect x="50" y="70" width="900" height="50" fill="none" stroke="#333" stroke-width="2"/>
  
  <!-- Field divisions (byte-oriented) -->
  <!-- CHANID: 1 byte (0) - 56px -->
  <rect x="50" y="70" width="56" height="50" fill="#FF6B6B" stroke="#333"/>
  <text x="78" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white" font-weight="bold">CHANID</text>
  
  <!-- OPCODE: 1 byte (1) - 56px -->
  <rect x="106" y="70" width="56" height="50" fill="#4ECDC4" stroke="#333"/>
  <text x="134" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white" font-weight="bold">OPCODE</text>
  
  <!-- SIZE: 1 byte (2) - 56px -->
  <rect x="162" y="70" width="56" height="50" fill="#45B7D1" stroke="#333"/>
  <text x="190" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white" font-weight="bold">SIZE</text>
  
  <!-- MASK/DENIED: 1 byte (3) - 56px -->
  <rect x="218" y="70" width="56" height="50" fill="#96CEB4" stroke="#333"/>
  <text x="246" y="95" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333" font-weight="bold">MASK/</text>
  <text x="246" y="105" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333" font-weight="bold">DENIED</text>
  
  <!-- ADDRESS: 4 bytes (4-7) - 224px -->
  <rect x="274" y="70" width="224" height="50" fill="#FFEAA7" stroke="#333"/>
  <text x="386" y="100" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">ADDRESS (32 bits)</text>
  
  <!-- DATA: 8 bytes (8-15) - 448px -->
  <rect x="498" y="70" width="452" height="50" fill="#DDA0DD" stroke="#333"/>
  <text x="724" y="100" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">DATA (64 bits)</text>
  
  <!-- Field labels below with spacing -->
  <g font-family="Arial, sans-serif" font-size="10" fill="#333">
    <!-- Byte positions -->
    <text x="78" y="140" text-anchor="middle">0</text>
    <text x="134" y="140" text-anchor="middle">1</text>
    <text x="190" y="140" text-anchor="middle">2</text>
    <text x="246" y="140" text-anchor="middle">3</text>
    <text x="386" y="140" text-anchor="middle">4-7</text>
    <text x="724" y="140" text-anchor="middle">8-15</text>
    
    <!-- Field names -->
    <text x="78" y="155" text-anchor="middle" font-weight="bold">CHANID</text>
    <text x="134" y="155" text-anchor="middle" font-weight="bold">OPCODE</text>
    <text x="190" y="155" text-anchor="middle" font-weight="bold">SIZE</text>
    <text x="246" y="155" text-anchor="middle" font-weight="bold">UNION</text>
    <text x="386" y="155" text-anchor="middle" font-weight="bold">ADDRESS</text>
    <text x="724" y="155" text-anchor="middle" font-weight="bold">DATA</text>
    
    <!-- Sizes -->
    <text x="78" y="170" text-anchor="middle" font-size="8" fill="#666">(8 bits)</text>
    <text x="134" y="170" text-anchor="middle" font-size="8" fill="#666">(8 bits)</text>
    <text x="190" y="170" text-anchor="middle" font-size="8" fill="#666">(8 bits)</text>
    <text x="246" y="170" text-anchor="middle" font-size="8" fill="#666">(8 bits)</text>
    <text x="386" y="170" text-anchor="middle" font-size="8" fill="#666">(32 bits)</text>
    <text x="724" y="170" text-anchor="middle" font-size="8" fill="#666">(64 bits)</text>
  </g>
  
  <!-- Legend -->
  <text x="50" y="210" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Field Descriptions (Little Endian):</text>
  
  <g font-family="Arial, sans-serif" font-size="10" fill="#333">
    <text x="50" y="230">• CHANID (7:0): TileLink channel identifier (0=A channel, 3=D channel)</text>
    <text x="50" y="245">• OPCODE (7:0): Packed field containing opcode(2:0), param(2:0), corrupt(0), reserved(1:0)</text>
    <text x="50" y="260">• SIZE (7:0): Log2 of transfer size in bytes (e.g., 0=1B, 1=2B, 2=4B, 3=8B)</text>
    <text x="50" y="275">• UNION (7:0): Channel A = Mask (byte enables), Channel D = Denied flag</text>
    <text x="50" y="290">• ADDRESS (31:0): Memory address (little endian byte order)</text>
    <text x="50" y="305">• DATA (63:0): Data payload (little endian byte order)</text>
  </g>
  
  <!-- Command format -->
  <text x="50" y="340" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">STL Command Format:</text>
  <g font-family="Arial, sans-serif" font-size="10" fill="#333">
    <text x="50" y="360">Total Command: 20 bytes = 4-byte prefix ("stl+") + 16-byte packet</text>
    <text x="50" y="375">Response: 16 bytes (AccessAck for writes, AccessAckData for reads)</text>
  </g>
  
  <!-- Total size indicator -->
  <text x="500" y="410" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">Total Packet Size: 128 bits (16 bytes)</text>
  
  <!-- MSB/LSB indicators -->
  <text x="50" y="430" font-family="Arial, sans-serif" font-size="10" fill="#666">Byte 0 (First transmitted)</text>
  <text x="950" y="430" font-family="Arial, sans-serif" font-size="10" text-anchor="end" fill="#666">Byte 15 (Last transmitted)</text>
  
  <!-- Note about byte order -->
  <text x="500" y="190" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#888" font-style="italic">Note: All multi-byte fields use little-endian byte ordering</text>
</svg>