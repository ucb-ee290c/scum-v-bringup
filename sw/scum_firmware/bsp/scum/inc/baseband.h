#include "mmio.h"

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

// Address map
#define BASEBAND_INST 0x8000
#define BASEBAND_ADDITIONAL_DATA 0x8004

#define BASEBAND_STATUS0 0x8008
#define BASEBAND_STATUS1 0x800C
#define BASEBAND_STATUS2 0x8010
#define BASEBAND_STATUS3 0x8014
#define BASEBAND_STATUS4 0x8018

#define BASEBAND_TRIM_G0 0x801C
#define BASEBAND_TRIM_G1 0x801D
#define BASEBAND_TRIM_G2 0x801E
#define BASEBAND_TRIM_G3 0x801F
#define BASEBAND_TRIM_G4 0x8020
#define BASEBAND_TRIM_G5 0x8021
#define BASEBAND_TRIM_G6 0x8022
#define BASEBAND_TRIM_G7 0x8023

#define BASEBAND_MIXER_R1_R0 0x8024
#define BASEBAND_MIXER_R3_R2 0x8025

#define BASEBAND_I_VGA_ATTEN_VALUE 0x8026
#define BASEBAND_I_VGA_ATTEN_RESET 0x8028
#define BASEBAND_I_VGA_ATTEN_USE_AGC 0x8029
#define BASEBAND_I_VGA_ATTEN_SAMPLE_WINDOW 0x802A
#define BASEBAND_I_VGA_ATTEN_IDEAL_P2P 0x802B
#define BASEBAND_I_VGA_ATTEN_GAIN 0x802C
#define BASEBAND_I_FILTER_R1_R0 0x802D
#define BASEBAND_I_FILTER_R3_R2 0x802E
#define BASEBAND_I_FILTER_R5_R4 0x802F
#define BASEBAND_I_FILTER_R7_R6 0x8030
#define BASEBAND_I_FILTER_R9_R8 0x8031

#define BASEBAND_Q_VGA_ATTEN_VALUE 0x8032
#define BASEBAND_Q_VGA_ATTEN_RESET 0x8034
#define BASEBAND_Q_VGA_ATTEN_USE_AGC 0x8035
#define BASEBAND_Q_VGA_ATTEN_SAMPLE_WINDOW 0x8036
#define BASEBAND_Q_VGA_ATTEN_IDEAL_P2P 0x8037
#define BASEBAND_Q_VGA_ATTEN_GAIN 0x8038
#define BASEBAND_Q_FILTER_R1_R0 0x8039
#define BASEBAND_Q_FILTER_R3_R2 0x803A
#define BASEBAND_Q_FILTER_R5_R4 0x803B
#define BASEBAND_Q_FILTER_R7_R6 0x803C
#define BASEBAND_Q_FILTER_R9_R8 0x803D

#define BASEBAND_I_DCO_USE_DCO 0x803E
#define BASEBAND_I_DCO_RESET 0x803F
#define BASEBAND_I_DCO_GAIN 0x8040

#define BASEBAND_Q_DCO_USE_DCO 0x8041
#define BASEBAND_Q_DCO_RESET 0x8042
#define BASEBAND_Q_DCO_GAIN 0x8043

#define BASEBAND_DAC_T0 0x8044
#define BASEBAND_DAC_T1 0x8045
#define BASEBAND_DAC_T2 0x8046
#define BASEBAND_DAC_T3 0x8047

#define BASEBAND_ENABLE_DEBUG 0x8048

#define BASEBAND_MUX_DBG_IN 0x804A
#define BASEBAND_MUX_DBG_OUT 0x804C

#define BASEBAND_ENABLE_RX_I 0x804E
#define BASEBAND_ENABLE_RX_Q 0x804F

#define BASEBAND_IMAGE_REJECTION_OP 0x8048

#define BASEBAND_LUT_CMD 0x8050

#define BASEBAND_RXERROR_MESSAGE 0x8054
#define BASEBAND_RXFINISH_MESSAGE 0x8058
#define BASEBAND_TXERROR_MESSAGE 0x805C

// Instruction macro
#define BASEBAND_INSTRUCTION(primaryInst, secondaryInst, data) ((primaryInst & 0xF) + ((secondaryInst & 0xF) << 4) + ((data & 0xFFFFFF) << 8))

// Primary instructions
#define BASEBAND_CONFIG 0
#define BASEBAND_SEND 1
#define BASEBAND_RECEIVE 2
#define BASEBAND_RECEIVE_EXIT 3
#define BASEBAND_DEBUG 15

// Secondary instructions
#define BASEBAND_CONFIG_CRC_SEED 0
#define BASEBAND_CONFIG_ACCESS_ADDRESS 1
#define BASEBAND_CONFIG_CHANNEL_INDEX 2
