<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>SCuM-V23 Specification</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
<h1>SCuM-V23 Specification</h1>
<div class="details">
<span id="revnumber">version v1.0</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_resource_index">1. Resource Index</a></li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_block_level_diagram_chip_features">2.1. Block Level Diagram + Chip Features</a></li>
<li><a href="#_32_bit_risc_v_core">2.2. 32-bit RISC-V Core</a></li>
<li><a href="#_on_chip_memory_system">2.3. On-Chip Memory System</a></li>
<li><a href="#_busses">2.4. Busses</a></li>
<li><a href="#_interrupts">2.5. Interrupts</a></li>
<li><a href="#_dual_mode_bleieee_802_15_4_transceiver">2.6. Dual-Mode BLE/IEEE 802.15.4 Transceiver</a></li>
</ul>
</li>
<li><a href="#_power_system">3. Power System</a>
<ul class="sectlevel2">
<li><a href="#_switched_capacitor_converter">3.1. Switched Capacitor Converter</a></li>
<li><a href="#_low_dropout_ldo_voltage_regulators">3.2. Low Dropout (LDO) Voltage Regulators</a></li>
<li><a href="#_current_reference">3.3. Current Reference</a></li>
<li><a href="#_bandgap_reference">3.4. Bandgap Reference</a>
<ul class="sectlevel3">
<li><a href="#_core_bgr_circuit">3.4.1. Core BGR Circuit</a></li>
<li><a href="#_2_stage_op_amp">3.4.2. 2-Stage Op-Amp</a></li>
</ul>
</li>
<li><a href="#_utility_current_dac">3.5. Utility Current DAC</a></li>
</ul>
</li>
<li><a href="#_oscillators">4. Oscillators</a></li>
<li><a href="#_digital_core">5. Digital Core</a>
<ul class="sectlevel2">
<li><a href="#_key_features">5.1. Key Features</a></li>
<li><a href="#_power_consumption">5.2. Power Consumption</a></li>
<li><a href="#_boot_process">5.3. Boot Process</a></li>
</ul>
</li>
<li><a href="#_digital_baseband_modem">6. Digital Baseband-Modem</a>
<ul class="sectlevel2">
<li><a href="#_dual_mode_baseband_modem">6.1. Dual-Mode Baseband-Modem</a>
<ul class="sectlevel3">
<li><a href="#_architecture_overview">6.1.1. Architecture Overview</a></li>
<li><a href="#_baseband_modem_frontend">6.1.2. Baseband-Modem Frontend</a></li>
<li><a href="#_interrupts_2">6.1.3. Interrupts</a></li>
</ul>
</li>
<li><a href="#_ieee_802_15_4_lr_wpan_baseband">6.2. IEEE 802.15.4 LR-WPAN Baseband</a></li>
<li><a href="#_bluetooth_low_energy_ble_baseband">6.3. Bluetooth Low Energy (BLE) Baseband</a></li>
</ul>
</li>
<li><a href="#_encryption_modules">7. Encryption Modules</a>
<ul class="sectlevel2">
<li><a href="#_ecc">7.1. ECC</a></li>
<li><a href="#_aes">7.2. AES</a></li>
<li><a href="#_sha_256">7.3. SHA-256</a></li>
</ul>
</li>
<li><a href="#_2_4_ghz_tranceiver">8. 2.4 GHz Tranceiver</a>
<ul class="sectlevel2">
<li><a href="#_radio_architecture">8.1. Radio Architecture</a></li>
<li><a href="#_radio_final_block_diagram">8.2. Radio Final Block Diagram</a></li>
<li><a href="#_all_interface_pins">8.3. All Interface Pins</a></li>
<li><a href="#_transmitter">8.4. Transmitter</a>
<ul class="sectlevel3">
<li><a href="#_dco_performance">8.4.1. DCO Performance</a></li>
<li><a href="#_pa_performance">8.4.2. PA Performance</a></li>
</ul>
</li>
<li><a href="#_design_flow_tradeoffs_and_decisions">8.5. Design Flow, Tradeoffs, and Decisions</a>
<ul class="sectlevel3">
<li><a href="#_rf_frontend">8.5.1. RF Frontend</a></li>
<li><a href="#_baseband">8.5.2. Baseband</a></li>
</ul>
</li>
<li><a href="#_simulation">8.6. Simulation</a></li>
</ul>
</li>
<li><a href="#_94_ghz_fmcw_radar_transmitter">9. 94 GHz FMCW Radar Transmitter</a>
<ul class="sectlevel2">
<li><a href="#_system_overview">9.1. System Overview</a></li>
<li><a href="#_ramp_generator">9.2. Ramp Generator</a></li>
<li><a href="#_r_2r_dac">9.3. R-2R DAC</a></li>
<li><a href="#_vco">9.4. VCO</a></li>
<li><a href="#_frequency_doubler">9.5. Frequency Doubler</a></li>
<li><a href="#_pa">9.6. PA</a></li>
<li><a href="#_register_map">9.7. Register Map</a></li>
<li><a href="#_layout">9.8. Layout</a></li>
</ul>
</li>
<li><a href="#_uv_precision_delta_sigma_adc">10. uV-Precision Delta-Sigma ADC</a>
<ul class="sectlevel2">
<li><a href="#_system_level_diagram_and_description">10.1. System-level Diagram and Description</a></li>
<li><a href="#_analog_front_end">10.2. Analog Front-End</a></li>
<li><a href="#_digital_front_end">10.3. Digital Front-End</a></li>
<li><a href="#_register_map_2">10.4. Register Map</a></li>
</ul>
</li>
<li><a href="#_electrical_characteristics">11. Electrical Characteristics</a></li>
<li><a href="#_usage_scenarios">12. Usage Scenarios</a></li>
<li><a href="#_revision_history">13. Revision History</a></li>
<li><a href="#_appendix">14. Appendix</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_resource_index"><a class="link" href="#_resource_index">1. Resource Index</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Link</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCuM-V23 End of Semester Review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final design review from Sp23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.google.com/presentation/d/12go3DiuhL_MuZc9lrPC-D9m9Jhr7LV5_/edit?usp=sharing">Google Slides</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCuM-V23 Mid-Semester Review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mid-semester design review from Sp23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.google.com/presentation/d/1NwGTKHJewxJkg_gc0BDnHbPr_JOrNUo1XQNuW6IDmBM/edit?usp=sharing">Google Slides</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Analog RF Simulations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Locations and information on running RF analog simulations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.google.com/document/d/1AonYYLMqA6wxp_P3jY-1RgbcOX0xAsPm3z0Vx6l0DUo/edit?usp=sharing">Google Doc</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCuM-V22 Bringup Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archive of SCuM-V22 bringup measurements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.google.com/presentation/d/1fyWcBpSb9hvuizlRUf65NovWjaN5w86_6e52kjnYkxQ/edit?usp=sharing">Google Slides</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="link" href="#_overview">2. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document describes the Single-Chip Micro Mote V (SCuM-V), a 16nm system-on-chip (SoC) for internet-of-things (IoT) applications, developed as part of the 2022 offering of EE194/EE290C Special Topics in Circuit Design class.</p>
</div>
<div class="paragraph">
<p>The SoC is designed around the RISC-V 5-stage in-order Rocket processor, generated by the RocketChip generator, embedded in the Chipyard framework. It features a crystal-free design with custom dual-mode IEEE 802.15.4 and Bluetooth Low Energy (BLE) transceiver. The SoC is implemented in the Intel 16 FinFET process.</p>
</div>
<div class="paragraph">
<p>The SCuM-V chip offers several GPIO pins, a single UART bus, QSPI Flash, and an on-chip, crystal-free RTC with capture and compare registers.
This iteration of the chip did not support I2C or an AES accelerator.</p>
</div>
<div class="paragraph">
<p>SCuM-V23 has several new features introduced over its predecessor SCuM-V22:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>32-bit Rocket core with cryptography acceleration</p>
</li>
<li>
<p>Switched capacitor DC-DC converter cascaded with LDOs</p>
</li>
<li>
<p>90 GHz FMCW radar transmitter</p>
</li>
<li>
<p>18-bit µV-precision ADC</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_block_level_diagram_chip_features"><a class="link" href="#_block_level_diagram_chip_features">2.1. Block Level Diagram + Chip Features</a></h3>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T05-04-35-257Z.png" alt="2023 08 18T05 04 35 257Z">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_32_bit_risc_v_core"><a class="link" href="#_32_bit_risc_v_core">2.2. 32-bit RISC-V Core</a></h3>
<div class="paragraph">
<p>The SoC includes a 32-bit Rocket, which has a high-performance single-issue in-order execution pipeline, with a peak sustainable execution rate of one instruction per clock cycle. The core supports Machine and User privilege modes as well as standard Integer, Multiply, Atomic, Floating-Point and Compressed RISC‑V extensions (RV32IMAFC).</p>
</div>
<div class="paragraph">
<p>Detailed description of the core is in Chapter 3.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_chip_memory_system"><a class="link" href="#_on_chip_memory_system">2.3. On-Chip Memory System</a></h3>
<div class="paragraph">
<p>The Rocket core has a 8kB I$ and D$ and a 256kB scratchpad acting as L2 memory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_busses"><a class="link" href="#_busses">2.4. Busses</a></h3>
<div class="paragraph">
<p>The design includes a system, peripheral, control, and front bus. The Rocket Tile communicates through the system bus to the remaining three buses. The control bus accesses BootROM, PLIC/CLINT, and the debug interface. The frontend bus handles DMA devices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_interrupts"><a class="link" href="#_interrupts">2.5. Interrupts</a></h3>
<div class="paragraph">
<p>Two interrupt controllers for handling MMIO are attached to the control bus, the platform level interrupt controller and the core local interrupts. Core local interrupts are used for timer and the software while the PLIC interacts with the peripherals.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dual_mode_bleieee_802_15_4_transceiver"><a class="link" href="#_dual_mode_bleieee_802_15_4_transceiver">2.6. Dual-Mode BLE/IEEE 802.15.4 Transceiver</a></h3>
<div class="paragraph">
<p>A dual-mode transceiver that supports both Bluetooth Low-Energy and IEEE 802.15.4 modes of operation. In the Bluetooth LE operating mode, the transceiver is capable of sending and receiving BLE Link Layer packets at a rate of 1Msym/s. In IEEE 802.15.4 operating mode, the transceiver sends and receives 802.15.4 PHY packets at 2 Msym/s.</p>
</div>
<div class="paragraph">
<p>The CPU is able to provide packet payloads to the digital baseband using DMA. Incoming packets will trigger multiple interrupts and provide the packet to the CPU via DMA. Control, status, and tuning registers are exposed to the CPU via MMIO. This includes a large suite of parameters of the transceiver (e.g. radio mode, channel tuning) that are accessed with these memory-mapped registers.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_power_system"><a class="link" href="#_power_system">3. Power System</a></h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T04-39-38-412Z.png" alt="2023 08 18T04 39 38 412Z">
</div>
</div>
<div class="paragraph">
<p>SCuM-V23 has 3 power domains:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>VDD_A - 1V, 5mA expected</p>
</li>
<li>
<p>VDD_RF - 1V, 15mA expected</p>
</li>
<li>
<p>VDD_D - 0.85V, 15mA expected</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_switched_capacitor_converter"><a class="link" href="#_switched_capacitor_converter">3.1. Switched Capacitor Converter</a></h3>
<div class="paragraph">
<p>Ladder 3:1 Topology</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All capacitors &amp; switches are rated at Vout.</p>
</li>
<li>
<p>Externally Reconfigurable for 3:1, 2:1, 3:2 for exploiting full battery voltage range.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T05-11-42-302Z.png" alt="2023 08 18T05 11 42 302Z">
</div>
<div class="title">Figure 1. Switched capacitor converter schematic</div>
</div>
<div class="paragraph">
<p>Simulated Efficiency Variation with Load</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T16-16-56-451Z.png" alt="2023 08 18T16 16 56 451Z">
</div>
<div class="title">Figure 2. (Left) Efficiency Variation with Load. (Right) Vout Variation with Load</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Simulated performance</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Simulated Performance Parameters</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clock Frequency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">85MHz-120MHz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Peak Power Efficiency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">75% (Pre-layout)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full-load Efficiency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">68% (Pre-layout) and &lt;50% (Post-layout)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Vout_ripple (pk-pk)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50 mVpp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power Density at full-load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65mW/mm<sup>2</sup> @100MHz</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Overview of High-Level Power Converter Design</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameters</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total Capacitance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5nF</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capacitor Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MOM+MOS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vin Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.2 V-3V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vout Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8V-1.1V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conversion Ratios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3:1, 2:1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5mA to 30mA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Switched-Capacitor Area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">450,000 um<sup>2</sup> (75% of Power Block)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Output Power</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 mW</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_low_dropout_ldo_voltage_regulators"><a class="link" href="#_low_dropout_ldo_voltage_regulators">3.2. Low Dropout (LDO) Voltage Regulators</a></h3>
<div class="paragraph">
<p>The design of the LDO is a 2-stage amplifier where the output of the differential amplifier drives the gate of the PMOS at the second stage and the output of the drain of this PMOS is the regulated voltage. This voltage is then passed through a resistor-feedback network to get the desired regulated voltage for different power domains. An additional capacitor is attached at the output voltage as well to stabilize the LDO. Since each domain requires different voltages, the resistors values were chosen to such that the feedback yielded the desired voltage for different domains (1V for the RF analog, and 0.85V for Digital).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Simulated performance</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">LDO_RF (1 V)</th>
<th class="tableblock halign-left valign-top">LDO_Digital (0.85 V)</th>
<th class="tableblock halign-left valign-top">LDO_Analog (1 V)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8 V - 1.2 V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8 V - 1.2 V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8 V - 1.2 V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vout range (at full load)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.08 V - 0.81 V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.83 V - 0.73  V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.19 V - 0.978 V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Output Power</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 mW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 mW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 mW</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_current_reference"><a class="link" href="#_current_reference">3.3. Current Reference</a></h3>
<div class="paragraph">
<p>Distributes 2 uA current reference to other blocks, includes a start-up circuit.</p>
</div>
<div class="paragraph">
<p>Parasitic extraction results:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Typical conditions yields reference current ranging from 1.98 uA to 2.4 uA (~20% variation)</p>
</li>
<li>
<p>Large variation with corners</p>
</li>
<li>
<p>Worst case: ff_hot at 3.04 uA</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bandgap_reference"><a class="link" href="#_bandgap_reference">3.4. Bandgap Reference</a></h3>
<div class="paragraph">
<p>The Bandgap Reference Circuit (BGR) can be splitted into 3 parts: startup circuit, 2-stage op-amp, and the core BGR circuit. There are 2 included RDACs for the temperature coefficient and output voltage (Vref) adjustment.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Key parameters and simulated performance</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Spec</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output, VBAT=1.6V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~650 mV</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power Consumption, T=27C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~1.8 mW</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PSRR, f=1 MHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~58 dB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Layout Area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~ 7,500 um<sup>2</sup></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_core_bgr_circuit"><a class="link" href="#_core_bgr_circuit">3.4.1. Core BGR Circuit</a></h4>
<div class="paragraph">
<p>The temperature compensation coefficient is determined by the ratio of R3/R2, while the output voltage level is determined by the ratio of R4/R2, assuming R1=R2. R3 and R4 are ev  entually implemented as RDACS to enable tuning of temperature coefficient and output voltage shifting for LDO Vref supply.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_stage_op_amp"><a class="link" href="#_2_stage_op_amp">3.4.2. 2-Stage Op-Amp</a></h4>
<div class="paragraph">
<p>A two stage opamp with Miller compensation and pole cancellation was used.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_utility_current_dac"><a class="link" href="#_utility_current_dac">3.5. Utility Current DAC</a></h3>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T16-31-54-728Z.png" alt="2023 08 18T16 31 54 728Z">
</div>
<div class="title">Figure 3. Utility Current DAC schematic</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Key parameters and simulated performance</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Spec</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output @ 1.6 V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to 63 * IREF</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power @ 126 uA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~50 uW</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Current Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[0.1 uA, 20 uA]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load Voltage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~ 150 mV</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average DNL Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.73%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overall INL Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~2 uA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estimated Area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800 um<sup>2</sup></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>6-bit binary weighted current mirror scaling</p>
</li>
<li>
<p>Uses IREF input as LSB</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oscillators"><a class="link" href="#_oscillators">4. Oscillators</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>What clock domains are present?</p>
</li>
<li>
<p>How is the system intended to work if fully functional?</p>
</li>
<li>
<p>What tuning accessibility do we have?</p>
</li>
<li>
<p>What are minimum/maximum frequencies?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_digital_core"><a class="link" href="#_digital_core">5. Digital Core</a></h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T04-45-39-595Z.png" alt="2023 08 18T04 45 39 595Z">
</div>
</div>
<div class="sect2">
<h3 id="_key_features"><a class="link" href="#_key_features">5.1. Key Features</a></h3>
<div class="ulist">
<ul>
<li>
<p>RV32IMAFC Single Rocket Core</p>
</li>
<li>
<p>3 clocks for CPU core and peripherals:</p>
<div class="ulist">
<ul>
<li>
<p>200 MHz CPU clock</p>
</li>
<li>
<p>32 MHz ADC clock for BLE/IEEE 802.15.4 baseband-modem and precision sigma-delta ADC</p>
</li>
<li>
<p>1MHz RTC clock</p>
</li>
</ul>
</div>
</li>
<li>
<p>On-chip SRAM</p>
<div class="ulist">
<ul>
<li>
<p>256kB scratchpad (“L2”)</p>
</li>
<li>
<p>8kB 2 way I$ &amp; D$</p>
</li>
</ul>
</div>
</li>
<li>
<p>JTAG, UART, QSPI Flash, GPIO</p>
</li>
<li>
<p>Interrupt controller</p>
<div class="ulist">
<ul>
<li>
<p>PLIC (platform level)</p>
</li>
<li>
<p>CLINT (core level)</p>
</li>
</ul>
</div>
</li>
<li>
<p>RTC capture and compare peripheral</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_power_consumption"><a class="link" href="#_power_consumption">5.2. Power Consumption</a></h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Power consumption comparison of the core running a program with baseband register read/write and ALU usage. VCC=0.85V, CPU clock=200MHz</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Internal Power (mW)</th>
<th class="tableblock halign-left valign-top">Switching Power (mW)</th>
<th class="tableblock halign-left valign-top">Leakage Power (mW)</th>
<th class="tableblock halign-left valign-top">Total Power (mW)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCuM-V22 in Lab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11.9</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">42.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCuM-V23 dynamic power simulation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.060</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11.2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Based on simulations, total power consumption of the core decreased by 73% from SCuM-V22 to SCuM-V23. This improvement was achieved by reducing leakage power in the SRAM cells.</p>
</div>
</div>
<div class="sect2">
<h3 id="_boot_process"><a class="link" href="#_boot_process">5.3. Boot Process</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOT_SEL Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot Address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot Process Descritpion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self Boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x2000_0000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPI flash content is copied to memory
Jump to self boot base address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tethered Boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0000_0000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TSI &amp; JTAG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. Boot ROM configures a trap handler, and enters a wait for interrupt loop.</p>
<p class="tableblock">2. Use JTAG, TSI, or other external debugging tools to program the on-chip memory</p>
<p class="tableblock">3. Use JTAG, TSI, or other external tools to trigger a software interrupt (MSIP)</p>
<p class="tableblock">4. Boot ROM handles interrupt, jumps to the program memory.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Core architecture</p>
</li>
<li>
<p>How much memory</p>
</li>
<li>
<p>How do we boot</p>
</li>
<li>
<p>Where do we find simulations/programs that were run previously?</p>
</li>
<li>
<p>Where is the toolchain?</p>
</li>
<li>
<p>Is this the right memory map?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_digital_baseband_modem"><a class="link" href="#_digital_baseband_modem">6. Digital Baseband-Modem</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dual_mode_baseband_modem"><a class="link" href="#_dual_mode_baseband_modem">6.1. Dual-Mode Baseband-Modem</a></h3>
<div class="paragraph">
<p>The Dual-Mode Baseband-Modem (BM) is responsible for handling the transmission and reception of both Bluetooth LE and IEEE 802.15.4 packets. For Bluetooth Low Energy, the BM handles Bluetooth Low Energy 1M Uncoded Link Layer Packets. For IEEE 802.15.4, the BM handles packets transmitted according to the PHY standard for the O-QPSK modulation in the 2.4 GHz band. Additionally the BM exposes an interface for the CPU to read/write various information (e.g. tuning bits) to the analog RF.</p>
</div>
<div class="paragraph">
<p>There are two primary sub-components in the Baseband-Modem, the Baseband, and the Modem. The baseband is responsible for the bit-stream processing of incoming and outgoing packets. The modem is responsible for modulation on the TX side, and digital image rejection and demodulation on the RX side.</p>
</div>
<div class="sect3">
<h4 id="_architecture_overview"><a class="link" href="#_architecture_overview">6.1.1. Architecture Overview</a></h4>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T04-49-18-996Z.png" alt="2023 08 18T04 49 18 996Z">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T04-50-02-990Z.png" alt="2023 08 18T04 50 02 990Z">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_baseband_modem_frontend"><a class="link" href="#_baseband_modem_frontend">6.1.2. Baseband-Modem Frontend</a></h4>
<div class="sect4">
<h5 id="_commands_and_mmio_registers"><a class="link" href="#_commands_and_mmio_registers">Commands and MMIO Registers</a></h5>
<div class="paragraph">
<p>The baseband-modem (BM) block contains a set of memory mapped registers used for passing commands to the BM, tuning analog RF components, and making BM status visible to the CPU. The address map is shown below. Note that the addresses are relative to the BM’s base attachment address. For example, if the BM is attached at 0x8000, then the address of 0x04 corresponds to 0x8004.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">ADDR</th>
<th class="tableblock halign-center valign-top">DATA</th>
<th class="tableblock halign-center valign-top">Size (bits)</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Instruction</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instruction received from processor. Contains 4 bits of primary instruction, 4 bits of secondary instruction, then 24 bits of data.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x04</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Additional Data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional data to write. Set data before writing instructions when applicable.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x08</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Status 0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[2:0] Assembler State<br>
[5:3] Disassembler State<br>
[7:6] TX State<br>
[10:8] RX Controller State<br>
[12:11] TX Controller State<br>
[15:13] Controller State<br>
[23:16] ADC I data<br>
[31:24] ADC Q data</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x0C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Status 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[5:0] Modulation LUT index<br>
[10:6] I AGC LUT index<br>
[15:11] I DCOC LUT index<br>
[20:16] Q AGC LUT index<br>
[25:21] Q DCOC LUT index</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x10</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Status 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[31:0] BLE CDR bit count</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x14</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Status 3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[31:0] LRWPAN CDR bit count</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x18</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Status 4</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[31:0] LO/32 counter</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General trim bits (N/C)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1D</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[0] LO/32 input (external, not implemented)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1E</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General trim bits (N/C)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1F</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General trim bits (N/C)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x20</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 4</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General trim bits (N/C)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x21</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 5</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General trim bits (N/C)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x22</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 6</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General trim bits (N/C)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x23</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">General trim 7</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug Enable (0 = debug enable)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x24</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA gain control</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual VGA value if not using I AGC</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x26</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA attenuation reset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reset the I AGC</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x27</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA attenuation useAGC</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use I AGC (manual VGA value if not)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x28</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA attenuation sample window</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I AGC sample window</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x29</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA attenuation ideal peak to peak</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I AGC ideal peak to peak</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2A</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA tolerance peak to peak</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I AGC peak to peak tolerance</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2B</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I BPF CHP 0 &amp; 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I BPF CHP 2 &amp; 3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2D</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I BPF CHP 4 &amp; 5</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2E</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I BPF CLP 0 &amp; 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2F</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I BPF CLP 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x30</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA gain control</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual VGA value if not using Q AGC</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x32</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA attenuation reset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reset the Q AGC</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x33</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA attenuation useAGC</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use Q AGC (manual VGA value if not)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x34</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA attenuation sample window</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q AGC sample window</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x35</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA attenuation ideal peak to peak</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q AGC ideal peak to peak</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x36</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA tolerance peak to peak</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q AGC peak to peak tolerance</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x37</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q BPF CHP 0 &amp; 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x38</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q BPF CHP 2 &amp; 3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x39</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q BPF CHP 4 &amp; 5</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x3A</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q BPF CLP 0 &amp; 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x3B</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q BPF CLP 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q bandpass filter tuning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x3C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I DCO use</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toggle using I DCO</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x3D</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I DCO reset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reset the I DCO</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x3E</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I DCO gain</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set gain for I DCO (unsigned FixedPoint w/ 2 bit binary point)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x3F</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q DCO use</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toggle using Q DCO</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x40</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q DCO reset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reset the Q DCO</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x41</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q DCO gain</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set gain for Q DCO (unsigned FixedPoint w/ 2 bit binary point)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x42</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">DCOC tuning 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual I current DAC for stage 2 VGA value if not using I DCO</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x43</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">DCOC tuning 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual Q current DAC for stage 2 VGA value if not using Q DCO</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x46</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MUX debug in</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug configuration, input</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x48</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MUX debug out</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug configuration, output</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x4A</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Enable RX I</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual enable RX I values {3&#8217;b0, mix, buf, vga_s1, vga_s2, bpf}</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x4B</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Enable RX Q</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual enable RX Q values {3&#8217;b0, mix, buf, vga_s1, vga_s2, bpf}</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x4C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Enable VCO LO</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual enable VCO LO {6&#8217;b0, vco_lo, lna}</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x50</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">LUT command</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LUT set instruction [3:0] LUT ID [9:4] address (index) [31:10] value</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x54</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">RX error message</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrupt message, RX error message</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x58</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">RX finish message</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrupt message, RX finish message</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x5C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">TX error message</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrupt message, TX error message</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x60</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">FIR command</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FIR filter reprogramming instruction, [3:0] FIR ID [9:4] coefficient (index) [31:10] value</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x64</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA attenuation gain increase</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I AGC gain increase step size (by LUT index)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x65</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">I VGA attenuation gain decrease</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I AGC gain decrease step size (by LUT index)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x66</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA attenuation gain increase</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q AGC gain increase step size (by LUT index)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x67</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Q VGA attenuation gain decrease</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q AGC gain decrease step size (by LUT index)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In order to pass commands to the BM, two 32-bit registers at addresses 0x00 and 0x04 are utilized. The register at 0x04 contains the additional data field for a given command while the register at 0x00 contains the instruction. Writing to the register at 0x00 is the trigger for the BM to execute a given command. Accordingly, <strong>the processor should always write to the additional data register prior to writing to the instruction register for a given command.</strong> The format for a BM instruction and a list of available instructions are detailed below.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bits</th>
<th class="tableblock halign-left valign-top">31-8</th>
<th class="tableblock halign-left valign-top">7-4</th>
<th class="tableblock halign-left valign-top">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instruction 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instruction 1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_list_of_commands"><a class="link" href="#_list_of_commands">List of Commands</a></h5>
<div class="paragraph">
<p><strong>Configure Command</strong></p>
</div>
<div class="paragraph">
<p>Configure baseband constants. The constant is selected using the instruction 2 field and set to the value specified in the additional data field. In the case that the secondary instruction is set to CONFIG_LUT, reference the LUT addresses provided in the explanations below/</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Instruction 2</th>
<th class="tableblock halign-left valign-top">Instruction 1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X unless CONFIG_LUT, then LUT address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Additional Data</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value for the constant to be set to</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Instruction 2</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG_RADIO_MODE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG_CRC_SEED</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG_ACCESS_ADDRESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG_SHR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG_BLE_CHANNEL_INDEX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG_LRWPAN_CHANNEL_INDEX</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Configuration instruction descriptions</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">(0x0) CONFIG_RADIO_MODE</dt>
<dd>
<p>Specify the following in the Additional Data register (0x04) prior to issuing the instruction
0: Set the radio transceiver mode to Bluetooth Low Energy
1: Set the radio transceiver mode to IEEE 802.15.4 LR-WPAN
Valid in any radio mode.</p>
</dd>
<dt class="hdlist1">(0x1) CONFIG_CRC_SEED</dt>
<dd>
<p>Set the CRC (cyclic redundancy check) seed for the BLE and LR-WPAN CRC circuits to the value in the Additional Data register (0x04). This value changes for BLE and should be 0 for LR-WPAN</p>
</dd>
<dt class="hdlist1">(0x2) CONFIG_ACCESS_ADDRESS</dt>
<dd>
<p>Set the BLE Access Address for the BLE uncoded packet. This value must be provided by the CPU. More information may be found in the BLE Baseband section.
NOTE: An access address of 0xFFFFFFF6 disables whitening of transmitted BLE packets</p>
</dd>
<dt class="hdlist1">(0x3) CONFIG_SHR</dt>
<dd>
<p>Set the LRWPAN SHR to match with for receiving a LRWPAN packet. This value must be provided by the CPU. According to 802.15.4 spec, it should be a fixed value of 0xA700 (only 2 bytes are matched due to lower hardware cost), but is programmable for flexibility.</p>
</dd>
<dt class="hdlist1">(0x4) CONFIG_BLE_CHANNEL_INDEX</dt>
<dd>
<p>Values for the channel index can range from 0 to 39, corresponding to BLE channel frequencies beginning at 2402 MHz until 2480 MHz. It is critical to note that the channel index from 0 to 39 is a direct mapping to channel frequencies - NOT the BLE channel numbering scheme that considers advertising channels separately.. For example, setting CONFIG_BLE_CHANNEL_INDEX to 0 will result in a transmission with center frequency at 2402 MHz. This corresponds to BLE channel 37. More information: <a href="https://www.rfwireless-world.com/Terminology/BLE-Advertising-channels-and-Data-channels-list.html" class="bare">https://www.rfwireless-world.com/Terminology/BLE-Advertising-channels-and-Data-channels-list.html</a></p>
</dd>
<dt class="hdlist1">(0x5) CONFIG_LRWPAN_CHANNEL_INDEX</dt>
<dd>
<p>Values for the channel index can range from 0 to 15, corresponding to LR-WPAN channel frequencies beginning at 2405 MHz until 2480 MHz.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Send Command</strong></p>
</div>
<div class="paragraph">
<p>Transmit a specified number of PDU header and data bytes. Bytes are retrieved by the BM by loading them from the specified address.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Instruction 2</th>
<th class="tableblock halign-left valign-top">Instruction 1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Additional Data</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load address</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Receive Enter Command</strong></p>
</div>
<div class="paragraph">
<p>Place the device into receive mode. If a message is picked up, it will be stored starting at the specified address address.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Instruction 2</th>
<th class="tableblock halign-left valign-top">Instruction 1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Additional Data</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage address</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Receive Exit Command</strong></p>
</div>
<div class="paragraph">
<p>Exit the device from receive mode. This command will succeed as long as the device has not yet matched an instruction preamble.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Instruction 2</th>
<th class="tableblock halign-left valign-top">Instruction 1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Additional Data</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Debug Command</strong></p>
</div>
<div class="paragraph">
<p>Turns on both the TX and RX paths according to the specified loopback mask before passing the specified number of PDU bytes in a loop. For simplicity the return data is stored at &lt;load address + total bytes&gt; rounded to the next byte aligned address. The loopback mask is used to determine at which point the data should be revered and sent back towards the CC.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Instruction 2</th>
<th class="tableblock halign-left valign-top">Instruction 1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total bytes to send</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loopback mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Additional Data</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load address and base for store address calculation</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Loopback Mask</th>
<th class="tableblock halign-left valign-top">Loopback Point</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0b0001 (0x1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0b0010 (0x2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In the modem, loop the FSKTX output back in to the CDR in FSKRX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0b0100 (0x4)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0b1000 (0x8)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Loopback diagram, note that the FSKRX module handles loopback logic and directs the output of MSKTX &amp; GFSK TX modules to respective CDR blocks</div>
<p><span class="image"><img src="./images/2023-08-18T07-37-34-540Z.png" alt="2023 08 18T07 37 34 540Z"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_modem_luts"><a class="link" href="#_configuring_modem_luts">Configuring Modem LUTs</a></h5>
<div class="paragraph">
<p>The modem LUTs can be configured using the LUT command register in the MMIO map enumerated above (register offset 0x50).</p>
</div>
<div class="paragraph">
<p>LUT IDs are defined as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">0x0 - VCO_MOD</dt>
<dd>
<p>64-entry, 8-bit valued LUT that is sampled to produce frequency deviations from the center frequency. This LUT must be reloaded on each channel and mode change. 0 indicates the largest negative frequency deviation, 63 indicates the largest positive deviation, and 31 indicates no frequency deviation. Note that 0/63 should be +/-250kHz for BLE and +/-500kHz for LR-WPAN.</p>
</dd>
<dt class="hdlist1">0x1 - VCO_CT_BLE</dt>
<dd>
<p>40-entry LUT sampled with BLE channel index to produce coarse and medium tuning bits to drive the VCO to the center frequency of the BLE channel index selected. Does not apply when in LR-WPAN radio mode.</p>
</dd>
<dt class="hdlist1">0x2 - VCO_CT_LRWPAN</dt>
<dd>
<p>16-entry LUT that is sampled with the LR-WPAN channel index to produce the coarse and medium tuning bits to drive the VCO to the center frequency of the LR-WPAN channel index selected. Does not apply when in BLE radio mode.</p>
</dd>
<dt class="hdlist1">0x3 - AGC_I</dt>
<dd>
<p>64-entry LUT that is sampled to drive the VGA attenuation gain for the I channel VGA. Only the lower 32 entries are used.</p>
</dd>
<dt class="hdlist1">0x4 - AGC_Q</dt>
<dd>
<p>64-entry LUT that is sampled to drive the VGA attenuation gain for the Q channel VGA. Only the lower 32 entries are used.</p>
</dd>
<dt class="hdlist1">0x5 - DCO_I</dt>
<dd>
<p>64-entry LUT that is sampled to drive the current DAC for the I channel stage 2 VGA. Only the lower 32 entries are used.</p>
</dd>
<dt class="hdlist1">0x6 - DCO_Q</dt>
<dd>
<p>64-entry LUT that is sampled to drive the current DAC for the Q channel stage 2 VGA. Only the lower 32 entries are used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_the_fir_filter_coefficients"><a class="link" href="#_configuring_the_fir_filter_coefficients">Configuring the FIR filter coefficients</a></h5>
<div class="paragraph">
<p>The FIR filter coefficients can be configured using the FIR command register in the MMIO map enumerated above (register offset 0x60).</p>
</div>
<div class="paragraph">
<p>FIR IDs are defined as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">0x0 - NONE</dt>
<dd>
<p>Reserved</p>
</dd>
<dt class="hdlist1">0x1 - TX_GAUSSIAN</dt>
<dd>
<p>24-entry, 8-bit FixedPoint (2-bit fractional component) filter for BLE GFSK. Only 16 coefficients are used. Note the filter was designed to run at 8MHz (length = 2*cycles/bit) but there’s a bug in the implementation. The short-term fix to get it working was to double the coefficients.</p>
</dd>
<dt class="hdlist1">0x2 - RX_HILBERT_I</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for image rejection.</p>
</dd>
<dt class="hdlist1">0x3 - RX_HILBERT_Q</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for image rejection. The output of the I and Q filters are summed to form the image rejected signal suitable for FSK demodulation.</p>
</dd>
<dt class="hdlist1">0x4 - RX_MATCH_SIN_F0</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for matched filter for binary 0. Two templates (filters) are used to account for phase shift. Note BLE coefficients are loaded by default. LR-WPAN ones must be loaded separately.</p>
</dd>
<dt class="hdlist1">0x5 - RX_MATCH_COS_F0</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for matched filter for binary 0. Two templates (filters) are used to account for phase shift. Note BLE coefficients are loaded by default. LR-WPAN ones must be loaded separately.</p>
</dd>
<dt class="hdlist1">0x6 - RX_MATCH_SIN_F1</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for matched filter for binary 1. Two templates (filters) are used to account for phase shift. Note BLE coefficients are loaded by default. LR-WPAN ones must be loaded separately.</p>
</dd>
<dt class="hdlist1">0x7 - RX_MATCH_COS_F1</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for matched filter for binary 1. Two templates (filters) are used to account for phase shift. Note BLE coefficients are loaded by default. LR-WPAN ones must be loaded separately.</p>
</dd>
<dt class="hdlist1">0x8 - RX_LPF</dt>
<dd>
<p>32-entry, 16-bit FixedPoint (12-bit fractional component) filter for bitrate filter of the matched filter output. Two filters with the same coefficients are used, one for 0s and another for 1s. Note BLE coefficients are loaded by default. LR-WPAN ones must be loaded separately.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_interrupts_2"><a class="link" href="#_interrupts_2">6.1.3. Interrupts</a></h4>
<div class="paragraph">
<p>The Baseband-Modem provides five interrupts as outputs from the Baseband Frontend. These interrupts provide the CPU with triggers for events from the transceiver module. The interrupts are described in the table below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Baseband-Modem interrupt table</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interrupt Index</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RX_ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggers on recognition of an error while the BM is in RX state. The MMIO register 0x54 will be populated with an RX_ERROR_MESSAGE. Presently not implemented.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RX_START</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggers when the baseband disassembler/correlator enters the busy state. Denotes that a packet has been received and demodulated, but has not yet been disassembled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RX_FINISH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggers when the disassembler has completed processing an incoming message. Populates the MMIO register RX_FINISH_MESSAGE at 0x58 with the length of the message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX_ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggers on recognition of an error while the BM is in TX state. The MMIO register 0x5C will be populated with an TX_ERROR_MESSAGE. Presently not implemented.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX_FINISH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggers when the modem has completed transmission of all bytes in the provided message. The DMA read response bytes must match the number of bytes specified in the Send Command for this interrupt to fire.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ieee_802_15_4_lr_wpan_baseband"><a class="link" href="#_ieee_802_15_4_lr_wpan_baseband">6.2. IEEE 802.15.4 LR-WPAN Baseband</a></h3>
<div class="paragraph">
<div class="title">Baseband modulation/demodulation diagram</div>
<p>The LR-WPAN baseband transmission chain involves DMA packet disassembly, LR-WPAN packet assembly, CRC generation, bit-to-symbol translation, and symbol-to-chip translation before the final chip stream is provided to the modem for modulation. The packet is assembled according to the IEEE 802.15.4 (LR-WPAN) PPDU schematic (shown below).</p>
</div>
<div class="paragraph">
<p>It is important to note the rates at each stage of the baseband TX chain. The standard calls for a 250 kb/s bitrate corresponding to packet assembly/packet disassembly. Following bit-to-symbol translation, the symbol rate becomes 62.5 ksym/s (where 4 bits specifies 1 symbol). Following symbol-to-chip translation, the chip rate now matches the LR-WPAN nominal baseband frequency of 2 MHz frequency or 2 Mchip/s (where 1 symbol specifies 32 chips). The inverse applies for the RX chain.</p>
</div>
<div class="paragraph">
<p>During packet assembly, a frame check sequence is calculated as a 16-bit ITU-T CRC.</p>
</div>
<div class="paragraph">
<div class="title">CRC calculation diagram</div>
<p>The algorithm for the CRC begins by setting all remainder registers, r0&#8230;&#8203;r15, to zero. Next, we start from the LSB and shift the MHR and payload into the divider. The FCS is then the remainder register after the last bit of the data is shifted in. Lastly, the FCS is appended to the data field so that register r0 is transmitted first.</p>
</div>
<div class="paragraph">
<div class="title">IEEE 802.15.4 PPDU Schematic</div>
<p>The frame check sequence (FCS) is appended to the end of the PPDU as the MAC footer (MFR) in the diagram above. If the result of CRC checking is false, the [flag] is set to high, before triggering a RX_ERROR message.</p>
</div>
<div class="paragraph">
<div class="title">PSDU Schematic</div>
<p>The preamble for 15.4 is a 32-bit sequence of all zeros. The SFD is loosely analogous to the Access-Address (AA) of the BLE Baseband in that they both uniquely identify the start of the packet for the protocol used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bluetooth_low_energy_ble_baseband"><a class="link" href="#_bluetooth_low_energy_ble_baseband">6.3. Bluetooth Low Energy (BLE) Baseband</a></h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_encryption_modules"><a class="link" href="#_encryption_modules">7. Encryption Modules</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Establish secure communication between two devices in following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Share key Elliptic Curve Cryptography (ECC)</p>
</li>
<li>
<p>Sender encrypts message using Advanced Encryption Standard (AES) and shared key</p>
</li>
<li>
<p>Receiver decrypts message using AES and shared key</p>
</li>
<li>
<p>Receiver verifies message integrity using SHA-256</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/encryption_modules_overview.png" alt="encryption modules overview">
</div>
</div>
<div class="sect2">
<h3 id="_ecc"><a class="link" href="#_ecc">7.1. ECC</a></h3>
<div class="paragraph">
<p>ECC uses Chisel implementation and calls the Accelerator through C for math operations. Muliplier sizing is optimized.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/AES_module.png" alt="AES module">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aes"><a class="link" href="#_aes">7.2. AES</a></h3>
<div class="paragraph">
<p>AES uses Chisel implementation and AES is synthesizable on a Rocket chip. Users can call AES accelerator functions through software by utilizing software interrupts. The process involves loading the encryption key and message, initiating the encryption or decryption process, and optionally utilizing diagnostic tools to monitor cycle time for computation completion. The implementation has been thoroughly tested using C testbenches and validated with third-party online software tools. On average, it takes approximately 6 cycles per word, which equates to about 10 nanoseconds per byte for AES operations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/ECC_module.png" alt="ECC module">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sha_256"><a class="link" href="#_sha_256">7.3. SHA-256</a></h3>
<div class="paragraph">
<p>SHA-256 part combines multiple hash functions for its operation. It divides data into eight 16-bit chunks, denoted as A to H, and performs bitwise XOR, AND, and bit-shifting operations on these chunks. It shares similar implementation and capabilities with an AES accelerator, with the exception of its hashing functionality. The project includes C testbenches, similar to those used for AES, and has been verified using third-party online software tools. On average, it takes approximately 107 cycles to process 256 bits of data, which translates to about 70 nanoseconds per byte for hash computations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_4_ghz_tranceiver"><a class="link" href="#_2_4_ghz_tranceiver">8. 2.4 GHz Tranceiver</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_radio_architecture"><a class="link" href="#_radio_architecture">8.1. Radio Architecture</a></h3>
<div class="paragraph">
<p>The radio operates within the frequency range 2.4 to 2.4835 GHz covering 70 1MHz RF channels. The receive change should be sensitive to an input power range of -70 dBm to -10 dBm and achieve a BER of 0.1% or an SNR of 12.5 dB.</p>
</div>
</div>
<div class="sect2">
<h3 id="_radio_final_block_diagram"><a class="link" href="#_radio_final_block_diagram">8.2. Radio Final Block Diagram</a></h3>
<div class="paragraph">
<p><span class="image"><img src="./images/RF_block_diagram.png" alt="RF block diagram"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_all_interface_pins"><a class="link" href="#_all_interface_pins">8.3. All Interface Pins</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Analog/Signal Pins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Pins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LNA, Mixer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rx, lna_p, lna_n, iref_lna*, lo_0, lo_90, lo_180, lo_270</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TIA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mix_i_p, mix_i_n, mix_q_p, mix_q_n, tia_i_p, tia_i_n, tia_q_p, tia_q_n, MUXED_ANALOG_IN_P, MUXED_ANALOG_IN_N, MUXED_ANALOG_OUT_P, MUXED_ANALOG_OUT_N,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en_tia_i, en_tia_q, vga_gain_ctrL_i&lt;9&gt;, vga_can_ctrl_q&lt;9&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BPF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tia_i_p, tia_i_n, tia_q_p, tia_q_n, iref_bpf_i_1, iref_bpf_i_2, iref_bpf_q_1, iref_bpf_q_2,  MUXED_ANALOG_IN_P, MUXED_ANALOG_IN_N, MUXED_ANALOG_OUT_P, MUXED_ANALOG_OUT_N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en_bpf_i, en_bpf_q, bpf_q_clp_0&lt;3:0&gt;, bpf_q_clp_1&lt;3:0&gt;, bpf_q_clp_2&lt;3:0&gt;, bpf_q_chp_0&lt;3:0&gt;, bpf_q_chp_1&lt;3:0&gt;, bpf_q_chp_2&lt;3:0&gt;, bpf_q_chp_3&lt;3:0&gt;, bpf_q_chp_4&lt;3:0&gt;, bpf_q_chp_5&lt;3:0&gt;, bpf_i_clp_0&lt;3:0&gt;, bpf_i_clp_1&lt;3:0&gt;, bpf_i_clp_2&lt;3:0&gt;, bpf_i_chp_0&lt;3:0&gt;, bpf_i_chp_1&lt;3:0&gt;, bpf_i_chp_2&lt;3:0&gt;, bpf_i_chp_3&lt;3:0&gt;, bpf_i_chp_4&lt;3:0&gt;, bpf_i_chp_5&lt;3:0&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VGA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iref_vga_i, iref_vga_q, vga_i_p, vga_i_n, vga_q_p, vga_q_n, MUXED_ANALOG_IN_P, MUXED_ANALOG_IN_N, MUXED_ANALOG_OUT_P, MUXED_ANALOG_OUT_N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en_vga_i, en_vga_q, vga_gain_ctrl_q&lt;8:0&gt;, vga_gain_ctrl_i&lt;8:0&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VCO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOp, LOn, iref_vco, lo_0, lo_90, lo_180, lo_270, tx_p</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en_vco_lo, vco_freq_reset, vco_cap_mod&lt;0:7&gt;, vco_cap_med&lt;0:5&gt;, vco_cap_coarse&lt;0:9&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*iref_lna is, unfortunately, routed quickly from iref_tia_i, but provides the same current</p>
</div>
<div class="paragraph">
<p>Top-Level Layout Floorplan
TODO:  grab screenshot of final layout and identify important blocks</p>
</div>
</div>
<div class="sect2">
<h3 id="_transmitter"><a class="link" href="#_transmitter">8.4. Transmitter</a></h3>
<div class="paragraph">
<p>The transmitter is designed to operate in the 2.4 GHz ISM band and be standards-compliant with IEEE 802.15.4 and BLE. The tuning range of the 4.8 GHz DCO is 4.88 GHz +- 0.5 GHz with &lt;40 ppm of resolution (&lt;192 kHz), corresponding to 2.44 GHz +- 0.25 GHz after the divider.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/radio/transmitter_schematic.png" alt="transmitter schematic">
</div>
<div class="title">Figure 4. Transmitter schematic. The divider divides the 4.8 GHz DCO signal down to 2.4 GHz and also generates the differential in-phase and quadrature components for the mixer.</div>
</div>
<div class="sect3">
<h4 id="_dco_performance"><a class="link" href="#_dco_performance">8.4.1. DCO Performance</a></h4>
<div class="paragraph">
<p>Referenced to 4.8 GHz, the following table displays the specifications and the achieved performance with parasitic extraction at the typical corner.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specifications</th>
<th class="tableblock halign-left valign-top">Desired</th>
<th class="tableblock halign-left valign-top">Simulated</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power consumption [mW]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;1 mW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.871 mW</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tuning bandwidth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20% of center frequency (4.88 GHz)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18.12% (4.8 GHz center)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coarse step resolution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;64 MHz (1024 MHz bandwidth)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50.2 MHz (803 MHz bandwidth)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium step resolution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;4 MHz (180 MHz bandwidth)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.31 MHz (74 MHz bandwidth)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fine step resolution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;192 kHz (10 MHz bandwidth)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">67.2 kHz (4.3 MHz bandwidth)
Modulation step resolution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_pa_performance"><a class="link" href="#_pa_performance">8.4.2. PA Performance</a></h4>
<div class="paragraph">
<p>The PA is a class D PA consisting of three inverter stages. In simulation across corners, it outputs between 2.2 dBm and 3 dBm with an efficiency between 33% and 35%.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_flow_tradeoffs_and_decisions"><a class="link" href="#_design_flow_tradeoffs_and_decisions">8.5. Design Flow, Tradeoffs, and Decisions</a></h3>
<div class="sect3">
<h4 id="_rf_frontend"><a class="link" href="#_rf_frontend">8.5.1. RF Frontend</a></h4>
<div class="paragraph">
<p>The RF receive chain consists of an input balun that converts the single ended antenna signal to a differential input signal and provides help with impedance matching. Following the balun is a fully differential low noise amplifier with inductive degeneration that produces an RF current. The RF current is mixed, in current mode, by a 4-phase differential passive mixer which is then converted to an IF voltage by the TIA. For designing these circuits taking EE 142 is a must, and solid understanding of electromagnetics is very useful.</p>
</div>
<div class="sect4">
<h5 id="_balun"><a class="link" href="#_balun">Balun</a></h5>

</div>
<div class="sect4">
<h5 id="_lna"><a class="link" href="#_lna">LNA</a></h5>
<div class="paragraph">
<p>To be filled</p>
</div>
</div>
<div class="sect4">
<h5 id="_mixer"><a class="link" href="#_mixer">Mixer</a></h5>
<div class="paragraph">
<p>The mixer is a 4-phase differential passive mixer. Review 142/242B notes for analysis and implementation. Reused from SCuM-V22, designed by Rami Hijab.</p>
</div>
</div>
<div class="sect4">
<h5 id="_tia"><a class="link" href="#_tia">TIA*</a></h5>
<div class="paragraph">
<p>The TIA converts the mixer output current to a baseband output voltage.
Due to time constraints, we re-used the op-amp from the baseband chain for this TIA. However this should have been its only resistively biased inverter (or other topology) for better noise performance.
The key to the TIA (what was different from the baseband chain) was the resistive feedback. This was done last minute to meet the low and high gain requirements. The addition to make is to make sure that the system is invariant to PVT variation. This can be done by making the current source of the LNA a 1/R reference so that the LNA Gm cancels with the R in feedback with the TIA.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_baseband"><a class="link" href="#_baseband">8.5.2. Baseband</a></h4>
<div class="paragraph">
<p>The baseband chain consists of many individual blocks, and this means that not too much time could be spent on optimizing designs for each one. Building off of Neelesh&#8217;s experiences in the Spring 2022 iteration of the class, the main goals were to decrease power consumption and area of the baseband by optimizing the BPF implementation.</p>
</div>
<div class="sect4">
<h5 id="_vga"><a class="link" href="#_vga">VGA</a></h5>
<div class="sect5">
<h6 id="_stage_1"><a class="link" href="#_stage_1">Stage 1</a></h6>
<div class="paragraph">
<p>High gain folded cascode stage. Chosen to more independently control the stage 1 gm and the stage 1 Rout. Headroom limitations on the long-channel devices makes telescopic hard to achieve.
Input pair is very large to minimize DC offset voltage (proortional to area of the input devices).
Quite large intrinsic gain. Initially I wanted to support 60dB of dynamic range on the CL performance of the op-amp, which required 90dB or so of open-loop gain at the minimum. We ended up using 2 gain stages (TIA = stage 1, VGA = stage 2) so the second VGA only needed a max of 30dB dynamic gain. So, this stage can be optimized more for the new spec. BW concern is not that large since the IF of the baseband is only 2MHz.
Design approach: I used the topology of the previous semester as a starting point before beginning to test various currents, widths, device flavors, etc. I believe that 240B HW3 of Sp22 is the kind of assignment (as Prof. Niknejad for someone’s good solutions to this, or his own, or email me for mine, etc. etc.) that teaches you how to design the main baseband op-amp block (stage 1 at last), and is a really good learning opportunity for anyone interested in this work. When it comes down to testing, you have to know why the amp behaves the way it does, and whether it does what you expect (voltage biasing, currents, VGS/VDS, etc.). The difference between systematic design and just getting something that happens to work (honestly, I was stuck in this regime for a while) is that if a testbench result is puzzling, you should have an idea of how to proceed. Of course, message on slack/Piazza/ bring it up during weekly meetings, but individual progress unhampered by others is critical to get things done on time.</p>
</div>
</div>
<div class="sect5">
<h6 id="_stage_2"><a class="link" href="#_stage_2">Stage 2</a></h6>
<div class="paragraph">
<p>Common-source class A stage. Power was not a concern for the spec of this class, and so other topologies were not considered (the CS amp stage is quite simple to bias and understand as well).
Spent enough time to make sure this block was biased correctly and could support a large enough capacitive load. In reality, this varies; for the TIA, this cap load is the input of the BPF, which isn’t very large. But the output of the second VGA is the ADC input, which is a much larger (~pF) cap. Miller Compensation sets some limits on the relation between input/output stage gm values and the cap load you can drive (240B slides).</p>
</div>
</div>
<div class="sect5">
<h6 id="_cmfb_circuit"><a class="link" href="#_cmfb_circuit">CMFB Circuit</a></h6>
<div class="paragraph">
<p>Compares the output common-mode voltage to the desired level to set the top PMOS gate voltage.
Does not involve sensing resistors (minimizes area).
Fully-differential, PMOS diode loads
In hindsight, the second CMFB loop may not be needed at all (also helps stability to only have 1 CMFB loop). The PMOS bias can be a voltage source (add a branch to the biasing network).</p>
</div>
</div>
<div class="sect5">
<h6 id="_biasing"><a class="link" href="#_biasing">Biasing</a></h6>
<div class="paragraph">
<p>Functional but can be optimized. The structure can be made easier to control via more independent branches (more power but again, not a concern).</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_bpf"><a class="link" href="#_bpf">BPF</a></h5>
<div class="paragraph">
<p>This block was not hard to design given a good op-amp; there are many papers and sample designs available for a multiple-feedback active band-pass filter composed of individual HP/LP stages, along with design equations. In this case, a high pass filter is followed by a low pass filter to create the bandpass transfer function.</p>
</div>
<div class="paragraph">
<p>A redesign of the op amp used was done to reduce area, power consumption.</p>
</div>
<div class="paragraph">
<p>A 5T configuration was used.</p>
</div>
<div class="paragraph">
<p>A current mirror set up was used, with resistive CMFB using the four resistors at the bottom. Miller componsation is also implemented to ensure stability  between the fully differential outputs as denoted by voutp, voutn.</p>
</div>
<div class="paragraph">
<p>Upon simulation of the extracted view, it was found that the pass band of the BPF had shifted as the previous RC values for the high pass and low pass stages were not tuned properly. However, current simulations of the taped-out design show the passband near 12 MHz, and needs a fix.</p>
</div>
</div>
<div class="sect4">
<h5 id="_adc"><a class="link" href="#_adc">ADC</a></h5>
<div class="paragraph">
<p>This is a reused block from SCuM-V22 and developed by Zhaokai Liu.</p>
</div>
<div class="paragraph">
<p>A pseudo-differential input ADC, one can specify a high and low reference voltage in which comparison should be done. By taking the lower reference voltage as "ground", and the pseudo differential input signal as the input.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simulation"><a class="link" href="#_simulation">8.6. Simulation</a></h3>
<div class="paragraph">
<p>Refer to the "Analog RF Simulations" link in the Resource Index for information about locations of testbenches and final tapeout designs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_94_ghz_fmcw_radar_transmitter"><a class="link" href="#_94_ghz_fmcw_radar_transmitter">9. 94 GHz FMCW Radar Transmitter</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The frequency-modulated continuous wave (FMCW) radar transmitter is designed to generate linear chirps with the following high-level specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Center frequency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">94 GHz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum chirp bandwidth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 GHz</p></td>
</tr>
</tbody>
</table>
<div class="imageblock text-center">
<div class="content">
<img src="./images/radar/chirp.png" alt="chirp" width="640">
</div>
<div class="title">Figure 5. Linear chirps over time with a center frequency of 94 GHz.</div>
</div>
<div class="paragraph">
<p>The radar transmitter is implemented with a Class A voltage-controlled 47 GHz oscillator with a varactor driven by a ramp voltage.
The ramp voltage is generated digitally by an 8-bit counter register whose output feeds into an R-2R DAC.
The output of the VCO is fed into a frequency doubler, and the resulting 94 GHz signal is amplified by the PA.</p>
</div>
<div class="paragraph">
<p>A center frequency of 94 GHz was chosen because Yahia, a graduate student advised by Prof. Niknejad, had recently taped out a 90 GHz PA in February 2023 and Prof. Niknejad suggested to use Yahia&#8217;s PA for this radar transmitter. As a result, the PA is courtesy of Yahia.</p>
</div>
<div class="sect2">
<h3 id="_system_overview"><a class="link" href="#_system_overview">9.1. System Overview</a></h3>
<div class="imageblock">
<div class="content">
<img src="./images/radar/radar_system_diagram.png" alt="radar system diagram">
</div>
<div class="title">Figure 6. Radar system-level diagram.</div>
</div>
<div class="paragraph">
<p>Unlike the other blocks on the chip, the radar transmitter has two dedicated power rails, <code>VDD_RADAR</code> and <code>VDD_PA</code>, that are not regulated internally and must be sourced externally. Nominally, <code>VDD_RADAR</code> should be 1 V, and <code>VDD_PA</code> should be 0.75 V.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ramp_generator"><a class="link" href="#_ramp_generator">9.2. Ramp Generator</a></h3>
<div class="paragraph">
<p>The ramp generator is a digital circuit responsible for outputting an 8-bit ramp output that feeds into the R-2R DAC. Internally, there is a 32-bit counter register that is clocked by the CPU clock and used to generate the ramp output.</p>
</div>
<div class="paragraph">
<p>There are two states of the ramp generator: <code>STATE_IDLE</code> and <code>STATE_RAMP</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <code>STATE_IDLE</code>, the ramp generator waits for <code>ramp_generator_num_idle_cycles</code> clock cycles before it moves to the <code>STATE_RAMP</code> state.</p>
</li>
<li>
<p>In <code>STATE_RAMP</code>, the ramp output is initially set to <code>ramp_generator_frequency_step_start</code>. Every <code>ramp_generator_num_cycles_per_frequency</code> clock cycles, the ramp output is incremented. Once the ramp output has been incremented <code>ramp_generator_num_frequency_steps</code> times, the ramp output is reset to <code>ramp_generator_frequency_step_start</code>, and the state machine moves back to the <code>STATE_IDLE</code> state. The ramp is now complete.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The reason for allowing the CPU to set <code>ramp_generator_frequency_step_start</code> as well as <code>ramp_generator_num_frequency_steps</code> is that the varactor&#8217;s capacitance is non-linear with respect to the control voltage. Therefore, the control registers should be set, so that the ramp voltage causes the VCO to sweep linearly over the desired chirp bandwidth.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/radar/ramp_generator_output.png" alt="ramp generator output">
</div>
<div class="title">Figure 7. Ramp generator output.</div>
</div>
</div>
<div class="sect2">
<h3 id="_r_2r_dac"><a class="link" href="#_r_2r_dac">9.3. R-2R DAC</a></h3>
<div class="paragraph">
<p>The R-2R DAC converts the 8-bit ramp output from the ramp generator into an analog ramp voltage between 0 V and 1 V that controls the varactor in the VCO.
The resistor values used are 1k and 2k.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vco"><a class="link" href="#_vco">9.4. VCO</a></h3>
<div class="paragraph">
<p>The VCO is a class A VCO with a 4-bit capacitive DAC ranging from 2 fF to 16 fF.
Unlike the capacitive DAC, where a higher tuning code corresponds to a lower frequency, the varactor&#8217;s capacitance decreases as a function of the control voltage. However, since the frequency is sensitive to the control voltage, the control voltage is not brought out as a debug signal.
In simulation, the VCO draws about 7 mW of power.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/radar/vco_schematic.png" alt="vco schematic" width="960">
</div>
<div class="title">Figure 8. VCO schematic.</div>
</div>
</div>
<div class="sect2">
<h3 id="_frequency_doubler"><a class="link" href="#_frequency_doubler">9.5. Frequency Doubler</a></h3>
<div class="paragraph">
<p>The frequency doubler uses a modified cross-coupled pair with a resonant LC tank to double the VCO output&#8217;s frequency.
In simulation, the frequency doubler draws about 16 mW of power.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/radar/frequency_doubler_schematic.png" alt="frequency doubler schematic" width="640">
</div>
<div class="title">Figure 9. Frequency doubler schematic.</div>
</div>
</div>
<div class="sect2">
<h3 id="_pa"><a class="link" href="#_pa">9.6. PA</a></h3>
<div class="paragraph">
<p>The PA was designed and laid out by Yahia with minor modifications for SCuM-V23.
The PA consists of a driver stage and an output stage and consumes up to 60 mA at a supply voltage of 0.75 V.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_map"><a class="link" href="#_register_map">9.7. Register Map</a></h3>
<div class="paragraph">
<p>The radar configuration registers are part of the <code>Scumvtuning</code> block, which contains a set of memory-mapped registers for tuning analog blocks. The base address of <code>Scumvtuning</code> is <code>0x0000_A000</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Register</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Size (bits)</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x0D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_clk_mux_sel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unused.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x0E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial <code>1b'1</code>.<br>
Enables the ramp output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x0F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_frequency_step_start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>8b'0</code>.<br>
Sets the initial ramp output for each ramp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_num_frequency_steps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>8b'0</code>.<br>
Sets the number of LSBs the ramp output should increment by for each ramp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_num_cycles_per_frequency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>24b'0</code>.<br>
Sets the number of clock cycles before incrementing the ramp output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x14</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_num_idle_cycles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>32b'0</code>.<br>
Sets the number of clock cycles to idle between ramps.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x18</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ramp_generator_rst</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>32b'1</code>.<br>
Resets the ramp generator&#8217;s counter and ramp output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x19</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vco_cap_tuning</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>5b'0</code>.<br>
Tunes the 4-bit capacitive DAC of the VCO. The MSB is unused.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x1A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vco_enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>1b'1</code>.<br>
Unused.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x1B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vco_div_enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>1b'1</code>.<br>
Unused.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x1C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pa_enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>1b'1</code>.<br>
Unused.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x1D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pa_bypass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>1b'0</code>.<br>
Unused.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0x1E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pa_input_mux_sel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial: <code>1b'0</code>.<br>
Unused.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_layout"><a class="link" href="#_layout">9.8. Layout</a></h3>
<div class="imageblock">
<div class="content">
<img src="./images/radar/radar_layout.png" alt="radar layout">
</div>
<div class="title">Figure 10. Final radar layout. The total area is 300 um x 200 um.</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uv_precision_delta_sigma_adc"><a class="link" href="#_uv_precision_delta_sigma_adc">10. uV-Precision Delta-Sigma ADC</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The uV-Precision ADC is designed to function as an EEG front-end with high-level specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resolution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 bits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Noise</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0 uVrms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Bandwidth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 Hz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spot Noise</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">45 nV/sqrt(Hz)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The ADC is implemented with a delta-sigma architecture, leveraging
a high oversampling ratio to achieve high resolution and low noise. The
input drives a current controlled oscillator, which is sampled by the
on-chip 32 MHz clock to generate a digital bitstream. The bitstream is
then processed by a digital decimation filter to generate the final
output sample.</p>
</div>
<div class="sect2">
<h3 id="_system_level_diagram_and_description"><a class="link" href="#_system_level_diagram_and_description">10.1. System-level Diagram and Description</a></h3>
<div class="paragraph">
<p><span class="image"><img src="./images/2023-08-18T07-45-18-330Z.png" alt="2023 08 18T07 45 18 330Z"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_analog_front_end"><a class="link" href="#_analog_front_end">10.2. Analog Front-End</a></h3>
<div class="paragraph">
<p>Input impedance? Mins and maxs?</p>
</div>
</div>
<div class="sect2">
<h3 id="_digital_front_end"><a class="link" href="#_digital_front_end">10.3. Digital Front-End</a></h3>
<div class="paragraph">
<p>The delta-sigma ADC&#8217;s DSP chain is implemented as a cascaded integrator comb (CIC) decimation filter for noise shaping. The key CIC filter parameters for this design are N=4, R=8000, M=1</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/2023-08-18T16-36-05-083Z.png" alt="2023 08 18T16 36 05 083Z">
</div>
<div class="title">Figure 11. Digital Front-End system-level diagram</div>
</div>
<div class="paragraph">
<p>The digital frontend features self-generated, software-programmable chopper clock generators for 1st and 2nd stage choppers. A digital de-chopper/mixer with configurable clock delay to match delay of the analog front-end is also implemented.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_map_2"><a class="link" href="#_register_map_2">10.4. Register Map</a></h3>
<div class="paragraph">
<p>The base address of the sensor ADC DSP block is 0xB000. All registers in the table below are specified as offsets from the base address 0xB000.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Register</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Size</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_STATUS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_STATUS&lt;11:6&gt; - ADC Counter P
 ADC_STATUS&lt;5:0&gt; - ADC Counter N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_DATA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read ADC sample from FIFO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_0&lt;5:0&gt; - Current DAC
ADC_TUNING_0&lt;6&gt; - BIAS P + ADC_TUNING_0&lt;7&gt; - BIAS N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_2&lt;0&gt; - Sensor VDD mux select</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_TUNING_3&lt;7:0&gt; - Reserved</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_CHOP_CLK_DIV_1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1st stage chopper clock divider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_CHOP_CLK_DIV_2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2nd stage chopper clock divider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_CHOP_CLK_EN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_CHOP_CLK_EN&lt;0&gt; - Enable 1st stage chopper
ADC_CHOP_CLK_EN&lt;1&gt; - Enable 2nd stage chopper</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_DSP_CTRL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC_DSP_CTRL&lt;0&gt; - Enable dechopper in DSP chain
 ADC_DSP_CTRL&lt;1&gt; - Select chopper clock used in the dechopper
 ADC_DSP_CTRL&lt;5:2&gt; - Dechopping clock delay, from 0 to 15 cycles</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_electrical_characteristics"><a class="link" href="#_electrical_characteristics">11. Electrical Characteristics</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Include tables or descriptive text for various electrical characteristics&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage_scenarios"><a class="link" href="#_usage_scenarios">12. Usage Scenarios</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Describe various application scenarios, operating modes, etc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history"><a class="link" href="#_revision_history">13. Revision History</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>v1.0 - Initial release</p>
</li>
<li>
<p>v0.9 - Preliminary draft</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix"><a class="link" href="#_appendix">14. Appendix</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Additional details, references, or supplementary material&#8230;&#8203;</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v1.0<br>
Last updated 2025-08-18 05:53:48 UTC
</div>
</div>
</body>
</html>